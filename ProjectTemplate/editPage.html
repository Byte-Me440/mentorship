<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <title>Home</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <script>
        $(document).ready(function () {
            postEditUser();
        });
    </script>

    <!--<script>
        $(document).ready(function () {
            postUser();
            $("body").css("cursor", "default");
        });
    </script>-->

    <script>
        function postEditUser() {
            var webMethod = "ProjectServices.asmx/ImportUsers"
            $.ajax({
                type: "POST",
                url: webMethod,

                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var usersArray = data.d;
                    //var usersID = localStorage.getItem('usersid');
                    var usersID = localStorage.getItem("UserId") - 1;

                    //var usersID = 1;
                    console.log(usersArray);

                    //welcome = usersArray[usersID]._FirstName;
                    //document.getElementById("welcomeFname").innerHTML = welcome;

                    $("#fName").val(usersArray[usersID]._FirstName);
                    $("#lName").val(usersArray[usersID]._LastName);
                    $("#welcomeFname").val(usersArray[usersID]._FirstName);

                    $("#myersBriggs").val(usersArray[usersID]._MyersBriggs);
                    $("#hobby1").val(usersArray[usersID]._Hobbies);
                    $("#goal1").val(usersArray[usersID]._CareerGoals);

                    $("#jobTitle").val(usersArray[usersID]._JobTitle);
                    $("#jobDept").val(usersArray[usersID]._Department);
                    $("#university").val(usersArray[usersID]._University);

                    $("#gradYear").val(usersArray[usersID]._GradDate);
                    $("#edLevel").val(usersArray[usersID]._EdLevel);
                    $("#edFocus").val(usersArray[usersID]._EdFocus);

                    $("#userLocation").val(usersArray[usersID]._Location);
                    $("#jobLocation").val(usersArray[usersID]._Location);


                    availabilityType = usersArray[usersID]._AvailabilityType;
                    console.log(availabilityType);

                    for (i = 0; i < availabilityType.length; i++) {
                        $("input[name='availType']").filter(function () {
                            return availabilityType[i].indexOf(this.value) != -1;
                        }).prop("checked", true);
                    }


                    availabilityTimes = usersArray[usersID]._AvailabilityTimes;
                    console.log(availabilityTimes);

                    for (i = 0; i < availabilityTimes.length; i++) {
                        $("input[name='availTime']").filter(function () {
                            return availabilityTimes[i].indexOf(this.value) != -1;
                        }).prop("checked", true);
                    }
                }
            });
        }
    </script>
    <script>
        function submitEditUsers() {


            // variable to store the concatenated character skills
            var availabilityTime = '';

            // make an empty variable to store the concatenated strings, and a variable to get and store all the skills into one variable by name attribute
            var timeInput = document.getElementsByName('availTime');

            // use for loop to go through all the checkboxes, if the input is checkbox and name is knownskills and if it is checked, concatenate the skills
            for (var x = 0; x < timeInput.length; x++) {
                if (timeInput[x].type == "checkbox" && timeInput[x].name == 'availTime') {
                    if (timeInput[x].checked == true) {
                        availabilityTime += timeInput[x].value + ',';
                    }
                }
            }


            var availabilityType = '';

            // make an empty variable to store the concatenated strings, and a variable to get and store all the skills into one variable by name attribute
            var typeInput = document.getElementsByName('availType');

            // use for loop to go through all the checkboxes, if the input is checkbox and name is knownskills and if it is checked, concatenate the skills
            for (var x = 0; x < typeInput.length; x++) {
                if (typeInput[x].type == "checkbox" && typeInput[x].name == 'availType') {
                    if (typeInput[x].checked == true) {
                        availabilityType += typeInput[x].value + ',';
                    }
                }
            }

            var fName = document.getElementById("fName").value;
            var lName = document.getElementById("lName").value;

            var bio = document.getElementById("bio").value;

            var myersBriggs = document.getElementById("myersBriggs").value;
            var hobby1 = document.getElementById("hobby1").value;
            var goal1 = document.getElementById("goal1").value;

            var jobTitle = document.getElementById("jobTitle").value;
            var jobDept = document.getElementById("jobDept").value;
            var university = document.getElementById("university").value;

            var gradYear = document.getElementById("gradYear").value;
            var edLevel = document.getElementById("edLevel").value;
            var edFocus = document.getElementById("edFocus").value;

            var userLocation = document.getElementById("userLocation").value;

            console.log(fName);
            console.log(lName);
            console.log(bio);
            console.log(myersBriggs);
            console.log(hobby1);
            console.log(goal1);
            console.log(jobTitle);
            console.log(jobDept);
            console.log(university);
            console.log(gradYear);
            console.log(edLevel);
            console.log(edFocus);
            console.log(userLocation);
            console.log(availabilityTime);
            console.log(availabilityType);

            //var availabilityTime = document.getElementsByName("availTime").value;
            //var availabilityType = document.getElementsByName("availType").value;
            //var jobLocation = document.getElementById("jobLocation").value;

            // dont forget to grab all the checkbox data and place in an array to insert back into the database

            //var webMethod = "ProjectServices.asmx/UpdateUser";
            var webMethod = "ProjectServices.asmx/UpdateAccount";


            var parameters = "{\"FirstName\":\"" + encodeURI(fName)
                + "\", \"LastName\":\"" + encodeURI(lName)
                + "\", \"Bio\":\"" + encodeURI(bio)
                + "\", \"MyersBriggs\":\"" + encodeURI(myersBriggs)
                + "\", \"Hobbies\":\"" + encodeURI(hobby1)
                + "\", \"CareerGoals\":\"" + encodeURI(goal1)
                + "\", \"JobTitle\":\"" + encodeURI(jobTitle)
                + "\", \"Department\":\"" + encodeURI(jobDept)
                + "\", \"University\":\"" + encodeURI(university)
                + "\", \"GradDate\":\"" + encodeURI(gradYear)
                + "\", \"EdLevel\":\"" + encodeURI(edLevel)
                + "\", \"EdFocus\":\"" + encodeURI(edFocus)
                + "\", \"Location\":\"" + encodeURI(userLocation)
                + "\", \"AvailabilityTimes\":\"" + encodeURI(availabilityTime)
                + "\", \"AvailabilityType\":\"" + encodeURI(availabilityType)
                + "\"}";

            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var responsefromserver = msg.d;
                    alert("success. edited user");
                    console.log(responsefromserver);
                    window.location.href = 'homeProfile.html';
                },
                error: function (e) {
                    alert("Error in javascript.");
                    console.log(e.toString());
                }
            });
        }
    </script>

    <style type="text/css">

        body {
            background: rgb(2,0,36);
            background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(16,142,174,1) 35%, rgba(0,212,255,1) 100%);
            width: 100%;
            padding: 100px;
        }

        .container {
            border-radius: 10px;
            box-shadow: 15px 20px 0px rgba(0,0,0,0.1);
            background: #fff;
        }

        main {
            padding-top: 10px;
            padding-right: 20px;
            padding-bottom: 20px;
            padding-left: 30px;
            display: block;
            background-color: #FFFFFF;
            overflow: auto;
            clear: right;
            font-family: Georgia, serif;
        }

        header {
            border-radius: 5px;
            background-color: #D3D3D3;
        }

        h1 {
            margin-bottom: 5px;
            margin-top: 5px;
            font-family: Georgia, serif;
            letter-spacing: 0.15em;
            padding-top: 0.5em;
            padding-bottom: 0.5em;
            padding-left: 0.5em;
            text-shadow: 1.5px 1.5px #808080;
        }

        h2 {
            border-radius: 5px;
            margin-bottom: 0;
            margin-top: 0;
            font-family: Georgia, serif;
            letter-spacing: 0.25em;
            padding-top: 0.5em;
            padding-bottom: 0.5em;
            text-align: center;
            background-color: #D3D3D3;
        }

        h3 {
            color: #0084a5;
            font-family: Georgia, serif;
            text-shadow: 1.5px 1.5px #CCCCCC;
        }

        h4 {
            font-family: Georgia, serif;
        }

        h5 {
            font-family: Georgia, serif;
        }

        .topNav {
            border-radius: 5px;
            border-width: 1px 0;
            padding: 0.5em;
            background-color: #ffffff;
            text-align: center;
            float: right;
            font-family: Georgia, serif;
        }

        .pages {
            padding: 1.5em;
            font-size: 100%;
            float: left;
            clear: both;
            font-family: Georgia, serif;
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            font-size: 1.2em;
            text-align: center;
        }

        nav li {
            border-bottom: 1px solid #000033;
            background-color: #0084a5;
            padding: 8px;
            margin-bottom: 2px;
            width: 180px;
            border-radius: 5px;
        }

        nav a:link {
            color: #ffffff;
        }

        nav a:visited {
            color: #ffffff;
        }

        nav a:hover {
            color: #00556a;
            text-decoration: none;
        }

        nav a {
            text-decoration: none;
        }

        button {
            border-radius: 5px;
            background-color: #0084a5;
            border: none;
            color: white;
            padding: 15px 44px;
            text-align: center;
            text-decoration: none;
            font-size: 15px;
            margin: 2px 10px;
            cursor: pointer;
            font-weight: bold;
        }

        .contents {
            overflow-y: scroll;
            height: 600px;
            width: auto;
            resize: none; /* Remove this if you want the user to resize the textarea */
        }

        .profile-box {
            width: 220px;
            float: left;
            text-align: center;
            clear: both;
        }

        .profile-pic {
            height: 150px;
            width: 180px;
            background-image: url('profile_img.png');
            background-size: 100% 100%;
            background-repeat: no-repeat;
            float: left;
            margin: 10px;
        }

        textarea {
            height: 600px;
            width: 600px;
        }

        .input {
            margin-top: 5px;
            margin-bottom: 5px;
        }

        .topics {
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">

        <br>

        <header>
            <h1>EDIT Home Page</h1>
        </header>

        <!-- top navigation to go to other pages, edit or log out -->
        <nav class="topNav">
            <button>Create Connection</button>
            <button>Messages</button>
            <button>Edit</button>
            <button>Log Out</button>
        </nav>

        <!-- left side of the page -->
        <div class="profile-pic"></div>

        <div class="profile-box">
            <h4>
                <input type="text" id="fName" placeholder="first name" style="width: 200px; text-align: center;">
                <input type="text" id="lName" placeholder="last name" style="width: 200px; text-align: center;">
            </h4>
        </div>

        <div class="profile-box">
            <h5>
                <input type="text" id="userLocation" placeholder="City" style="width: 200px; text-align: center;">
            </h5>
        </div>

        <nav class="pages">
            <ul>
                <li><a href="#profile_bio">Bio</a></li>
                <li><a href="#profile_job">Job</a></li>
                <li><a href="#profile_experience">Experience</a></li>
                <li><a href="#profile_availability">Availability</a></li>
            </ul>
        </nav>

        <main>

            <h2>Welcome <label id="welcomeFname"> </label>!</h2>

            <br>

            <div class="contents">
                <section>



                    <!-- Bio Section -->
                    <div class="row">
                        <h3 class="col-1">Bio:</h3>
                        <textarea class="col-11" id="bio" style="height: 100px; text-align:left;"></textarea>
                    </div>




                    <br>

                    <!-- Myers Briggs -->
                    <div class="row">
                        <div class="col-2">
                            <label class="topics">Myers Briggs:</label>
                            <!--<input type="text" id="myersBriggs" />-->
                            <!--<p id="myersBriggs"></p>-->
                        </div>
                        <div class="col-10">
                            <input type="text" id="myersBriggs" style="text-align: center;">
                        </div>
                    </div>

                    <br>

                    <!-- Hobbies -->
                    <div class="row">
                        <div class="col-2">
                            <label class="topics">Hobbies:</label>
                        </div>

                        <div class="col-10">
                            <input type="text" id="hobby1" style="text-align: center;">

                        </div>
                    </div>

                    <br>

                    <!-- Career Goals -->
                    <div class="row">
                        <div class="col-3">
                            <label class="topics">Career Goals:</label>
                        </div>

                        <div class="col-9">
                            <input type="text" id="goal1" style="text-align: center;">
                        </div>

                    </div>

                    <br>
                </section>

                <section>
                    <a id="profile_job">

                        <!-- Job Section -->
                        <h3>Job</h3>

                        <br>

                        <!-- Job Title -->
                        <div class="row">
                            <div class="col-3">
                                <label class="topics">Job Title:</label>
                            </div>
                            <div class="col-9">
                                <input type="text" id="jobTitle" style="text-align: center;">

                            </div>
                        </div>

                        <!-- Job Department -->
                        <div class="row">
                            <div class="col-3">
                                <label class="topics">Department:</label>
                            </div>
                            <div class="col-9">
                                <input type="text" id="jobDept" style="text-align: center;">

                            </div>
                        </div>

                        <!-- Job Location -->
                        <div class="row">
                            <div class="col-3">
                                <label class="topics">Location:</label>
                            </div>
                            <div class="col-9">
                                <input type="text" id="jobLocation" style="text-align: center;">

                            </div>
                        </div>

                        <br>

                    </a>
                </section>

                <section>
                    <a id="profile_experience">

                        <!-- Experience Section -->
                        <h3>Experience</h3>

                        <br>

                        <!-- University Info -->
                        <div class="row">
                            <div class="col-2">
                                <label class="topics">University:</label>
                            </div>
                            <div class="col-5">
                                <input type="text" id="university" style="text-align: center;">

                            </div>
                            <div class="col-2">
                                <label class="topics">Grad Date:</label>
                            </div>
                            <div class="col-3">
                                <input type="text" id="gradYear" style="text-align: center;">

                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3">
                                <label class="topics">Education Level:</label>
                            </div>
                            <div class="col-9">
                                <input type="text" id="edLevel" style="text-align: center;">

                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3">
                                <label class="topics">Education Focus:</label>
                            </div>
                            <div class="col-9">
                                <input type="text" id="edFocus" style="text-align: center;">

                            </div>
                        </div>

                        <!-- LinkedIn -->
                        <div class="row">
                            <div class="col-12">
                                <label class="topics">LinkedIn Profile:</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-9">
                                <p><a href="https://www.linkedin.com/" target="_blank" id="linkedIn"></a></p>
                            </div>
                        </div>


                        <br>
                    </a>
                </section>

                <section>
                    <a id="profile_availability">

                        <!-- Availability Section -->
                        <h3>Availability</h3>

                        <br>

                        <!-- Type -->
                        <div class="row">
                            <div class="col-3">
                                <label class="topics">Availability Type:</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3">
                                <!--<input type="checkbox" id="availEmail" value="Email" name="availType" disabled>
                                <label for="availEmail">Email</label>-->
                                <input type="checkbox" id="phone" value="Phone" name="availType" disabled>
                                <label for="phone">Phone</label>
                            </div>

                            <div class="col-3">
                                <!--<input type="checkbox" id="availPerson" value="In Person" name="availType" disabled>
                                <label for="availPerson">In Person</label>-->
                                <input type="checkbox" id="text" value="Text" name="availType" disabled>
                                <label for="text">Text</label>
                            </div>

                            <div class="col-3">
                                <!--<input type="checkbox" id="availPerson" value="In Person" name="availType" disabled>
                                <label for="availPerson">In Person</label>-->
                                <input type="checkbox" id="internet" value="Internet" name="availType" disabled>
                                <label for="internet">Internet</label>
                            </div>

                            <div class="col-3">
                                <!--<input type="checkbox" id="availPerson" value="In Person" name="availType" disabled>
                                <label for="availPerson">In Person</label>-->
                                <input type="checkbox" id="inPerson" value="In-Person" name="availType" disabled>
                                <label for="inPerson">In-Person</label>
                            </div>
                        </div>

                        <br>

                        <!-- Times -->
                        <div class="row">
                            <div class="col-3">
                                <label class="topics">Date:</label>
                            </div>
                            <div class="col-9">
                                <label class="topics">Time:</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3">
                                <!--<input type="checkbox" id="mon" name="availTime" value="Monday" disabled>-->
                                <label for="mon">Monday</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="monMorning" name="availTime" value="MM" disabled>
                                <label for="monMorning">Morning</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="monAfternoon" name="availTime" value="MA" disabled>
                                <label for="monAfternoon">Afternoon</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="monEvening" name="availTime" value="ME" disabled>
                                <label for="monEvening">Evening</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3">
                                <!--<input type="checkbox" id="tues" name="availTime" value="Tuesday" disabled>-->
                                <label for="tues">Tuesday</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="tuesMorning" name="availTime" value="TM" disabled>
                                <label for="tuesMorning">Morning</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="tuesAfternoon" name="availTime" value="TA" disabled>
                                <label for="tuesAfternoon">Afternoon</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="tuesEvening" name="availTime" value="TE" disabled>
                                <label for="tuesEvening">Evening</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3">
                                <!--<input type="checkbox" id="wed" name="availTime" value="Wednesday" disabled>-->
                                <label for="wed">Wednesday</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="wedMorning" name="availTime" value="WM" disabled>
                                <label for="wedMorning">Morning</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="wedAfternoon" name="availTime" value="WA" disabled>
                                <label for="wedAfternoon">Afternoon</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="wedEvening" name="availTime" value="WE" disabled>
                                <label for="wedEvening">Evening</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3">
                                <!--<input type="checkbox" id="thur" name="availTime" value="Thursday" disabled>-->
                                <label for="thur">Thursday</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="thurMorning" name="availTime" value="THM" disabled>
                                <label for="thurMorning">Morning</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="thurAfternoon" name="availTime" value="THA" disabled>
                                <label for="thurAfternoon">Afternoon</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="thurEvening" name="availTime" value="THE" disabled>
                                <label for="thurEvening">Evening</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3">
                                <!--<input type="checkbox" id="fri" name="availTime" value="Friday" disabled>-->
                                <label for="fri">Friday</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="friMorning" name="availTime" value="FM" disabled>
                                <label for="friMorning">Morning</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="friAfternoon" name="availTime" value="FA" disabled>
                                <label for="friAfternoon">Afternoon</label>
                            </div>
                            <div class="col-3">
                                <input type="checkbox" id="friEvening" name="availTime" value="FE" disabled>
                                <label for="friEvening">Evening</label>
                            </div>
                        </div>
                    </a>
                </section>
            </div>
        </main>

        <br>


        <div align="right">
            <button type="button" onclick="submitEditUsers()">Save Changes</button>
        </div>

    </div>

    <!--<div>
        <button type="button" onclick="submitEditUsers()">Save Changes</button>
    </div>-->

</body>
</html>
